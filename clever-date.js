!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CleverDate=t():e.CleverDate=t()}(self,(function(){return e={440:e=>{self,e.exports=(()=>{"use strict";var e={400:(e,t)=>{t.__esModule=!0;var r=function(){function e(){this.locale=navigator.language}return e.prototype.setLocale=function(e){this.locale=e},e.prototype.format=function(e,t,r){for(var n,o=e,u=/%([a-z]+)/gi;null!==(n=u.exec(e));){var i=this.getValueFromSymbol(n[1],t,null!=r?r:this.locale);null!==i&&(o=o.replace(n[0],i))}return o.replace("\\","")},e.prototype.getValueFromSymbol=function(e,t,r){switch(e){case"Y":return t.getFullYear().toString();case"y":return(""+t.getFullYear()).slice(-2);case"j":return t.getDate().toString();case"d":return("0"+t.getDate()).slice(-2);case"l":return new Intl.DateTimeFormat(r,{weekday:"long"}).format(t);case"D":return new Intl.DateTimeFormat(r,{weekday:"short"}).format(t);case"F":return new Intl.DateTimeFormat(r,{month:"long"}).format(t);case"M":return new Intl.DateTimeFormat(r,{month:"short"}).format(t);case"m":return("0"+(t.getMonth()+1)).slice(-2);case"n":return(t.getMonth()+1).toString();case"G":return t.getHours().toString();case"H":return("0"+t.getHours()).slice(-2);case"i":return("0"+t.getMinutes()).slice(-2);case"s":return("0"+t.getSeconds()).slice(-2);default:return null}},e}();t.default=r},820:function(e,t,r){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=new(n(r(400)).default),u={format:o.format.bind(o),setLocale:o.setLocale.bind(o),getValueFromSymbol:o.getValueFromSymbol.bind(o)};e.exports=u,t.default=u}},t={};return function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}(820)})()},400:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(r(806)),i=o(r(937)),a=o(r(711)),s=o(r(505)),l=o(r(320)),c=o(r(561)),f=o(r(693)),d=o(r(441)),p=function(){function e(){this.items=[],this.rules=[],this.timer=null,this.locale=d.default.getLocaleName()}return e.prototype.start=function(t){var r=this;void 0===t&&(t=null);var o=n(n({},new u.default),t);o.rules=o.rules.concat(l.default);var i=c.default.validate(o);if(i instanceof Error)throw i;this.rules=o.rules;var a=function(){r.extractItems(o.selector),r.analyse()};null===this.timer&&(this.timer=this.startTimer(o.refresh,a)),window.addEventListener(e.EVENT_REFRESH,(function(){return a()})),a()},e.prototype.stop=function(){null!==this.timer&&window.clearInterval(this.timer)},e.prototype.extractItems=function(e){var t=this;document.querySelectorAll("["+e+"]").forEach((function(r){var n=r.getAttribute(e);Number.isNaN(Number(n))||(n=1e3*parseInt(n,10));var o=new Date(n);o.getTime()>0&&t.items.push(new i.default(r,r.innerHTML,o)),r.removeAttribute(e),r.hasAttribute("title")||r.setAttribute("title",r.textContent)}))},e.prototype.analyse=function(){var e=this,t=new Date;this.items.filter((function(e){return void 0===e.nextUpdate||null!==e.nextUpdate&&e.nextUpdate<t})).forEach((function(t){return e.manageItem(t)}))},e.prototype.manageItem=function(e){var t=a.default.getDateInterval(e.date),r=s.default.render(this.rules,t,this.locale),n=function(t){e.reference.innerHTML!==t&&(e.reference.innerHTML=t)};r instanceof f.default?(null===r.nextUpdate&&this.removeItem(e),e.nextUpdate=r.nextUpdate,n(r.render)):n(e.initialContent)},e.prototype.startTimer=function(e,t){return window.setInterval((function(){t()}),1e3*e)},e.prototype.removeItem=function(e){var t=this.items.findIndex((function(t){return t===e}));t>=0&&this.items.splice(t,1)},e.EVENT_REFRESH="clever-date.update",e}();t.default=p},806:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.refresh=5,this.selector="data-clever-date",this.rules=[]};t.default=r},561:(e,t)=>{"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.validate=function(e){if("number"!=typeof e.refresh)return new Error("Refresh value must be a number.");for(var t=0,n=e.rules;t<n.length;t++){var o=n[t];if(!o.condition||!o.text||"object"!==r(o.text))return new Error("A rule must be composed of a condition and a corresponding text keys.")}return null},e}();t.default=n},625:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r,n,o){this.date=e,this.day=t,this.hour=r,this.minute=n,this.second=o};t.default=r},711:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(625)),u=function(){function e(){}return e.getDateInterval=function(t){var r=(Date.now()-t.getTime())/1e3,n=Math.trunc(r/e.SECONDS_IN_DAY);r-=e.SECONDS_IN_DAY*n;var u=Math.trunc(r/e.SECONDS_IN_HOUR);r-=e.SECONDS_IN_HOUR*u;var i=Math.trunc(r/e.SECONDS_IN_MINUTE);r-=e.SECONDS_IN_MINUTE*i;var a=Math.trunc(r);return new o.default(t,n,u,i,a)},e.SECONDS_IN_DAY=86400,e.SECONDS_IN_HOUR=3600,e.SECONDS_IN_MINUTE=60,e}();t.default=u},937:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,r){this.reference=e,this.initialContent=t,this.date=r};t.default=r},441:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getLocaleName=function(){return navigator.language.split("-")[0]},e}();t.default=r},505:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(r(440)),u=n(r(693)),i=function(){function e(){}return e.prototype.render=function(e,t,r){var n=e.find((function(e){return e.condition(t)&&r in e.text}));return n?new u.default(this.parseRule(n.text[r],t,r),this.calculateNextUpdate(n)):null},e.prototype.parseRule=function(e,t,r){var n=this.parseConditions(e,e,t,r);return(n=this.parseValues(e,n,t,r)).replace("\\","")},e.prototype.parseConditions=function(e,t,r,n){for(var o,u=/{%([a-z]+)\|([^|\[\]]*)\|([^|\[\]]*)}/gi;null!==(o=u.exec(e));){var i=this.getValueFromSymbol(o[1],r,n);null!==i&&(t=t.replace(o[0],parseInt(i,10)<=1?o[2]:o[3]))}return t},e.prototype.parseValues=function(e,t,r,n){for(var o,u=/%([a-z]+)/gi;null!==(o=u.exec(e));){var i=this.getValueFromSymbol(o[1],r,n);null!==i&&(t=t.replace(o[0],i))}return t},e.prototype.calculateNextUpdate=function(e){if(null===e.refresh)return null;if(void 0!==e.refresh){var t=new Date;return new Date(t.setTime(t.getTime()+1e3*e.refresh))}},e.prototype.getValueFromSymbol=function(e,t,r){switch(e){case"dd":return t.day.toString();case"dh":return t.hour.toString();case"dm":return t.minute.toString();case"ds":return t.second.toString();default:return o.default.getValueFromSymbol(e,t.date,r)}},e}();t.default=new i},693:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.render=e,this.nextUpdate=t};t.default=r},320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{condition:function(e){return 0===e.day&&0===e.hour&&0===e.minute&&e.second>=0&&e.second<30},text:{fr:"à l'instant",en:"just now"}},{condition:function(e){return 0===e.day&&0===e.hour&&0===e.minute&&e.second>=0&&e.second<60},text:{en:"%ds second{%ds||s} ago",fr:"il y a %ds seconde{%ds||s}"}},{condition:function(e){return 0===e.day&&0===e.hour&&e.minute>=0&&e.minute<60},text:{en:"%dm minute{%dm||s} ago",fr:"il y a %dm minute{%dm||s}"}},{condition:function(e){return 0===e.day&&e.hour>0&&e.hour>=0&&e.hour<12},refresh:300,text:{en:"%dh hour{%dh||s} ago",fr:"il y a %dh heure{%dh||s}"}},{condition:function(e){return(new Date).toDateString()===e.date.toDateString()},refresh:60,text:{en:"today at %H:%i",fr:"aujourd'hui à %H\\h%i"}},{condition:function(e){var t=new Date,r=t.setDate(t.getDate()-1);return new Date(r).toDateString()===e.date.toDateString()},refresh:60,text:{en:"yesterday at %H:%i",fr:"hier à %H\\h%i"}},{condition:function(e){return e.day>0&&e.day<7},refresh:3600,text:{en:"%l at %H:%i",fr:"%l à %H\\h%i"}},{condition:function(e){return e.date.getFullYear()===(new Date).getFullYear()},refresh:null,text:{en:"%F %d",fr:"le %d{%d|er|} %F"}},{condition:function(){return!0},refresh:null,text:{en:"%F %d, %Y",fr:"le %j{%d|er|} %F %Y"}}]},820:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=new(n(r(400)).default),u={start:o.start.bind(o),stop:o.stop.bind(o)};e.exports=u,t.default=u}},t={},function r(n){var o=t[n];if(void 0!==o)return o.exports;var u=t[n]={exports:{}};return e[n].call(u.exports,u,u.exports,r),u.exports}(820);var e,t}));