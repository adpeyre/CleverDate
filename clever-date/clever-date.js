!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CleverDate=t():e.CleverDate=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){this.render=e,this.nextUpdate=t};t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=new(r(n(2)).default),u={start:o.start.bind(o),stop:o.stop.bind(o)};e.exports=u,t.default=u},function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=o(n(3)),i=o(n(4)),a=o(n(5)),l=o(n(7)),s=o(n(9)),c=o(n(10)),f=o(n(0)),d=o(n(11)),p=function(){function e(){this.items=[],this.rules=[],this.timer=null,this.locale=d.default.getLocaleName()}return e.prototype.start=function(t){var n=this;void 0===t&&(t=null);var o=r(r({},new u.default),t);o.rules=o.rules.concat(s.default);var i=c.default.validate(o);if(i instanceof Error)throw i;this.rules=o.rules;var a=function(){n.extractItems(o.selector),n.analyse()};null===this.timer&&(this.timer=this.startTimer(o.refresh,a)),window.addEventListener(e.EVENT_REFRESH,(function(){return a()})),a()},e.prototype.stop=function(){null!==this.timer&&window.clearInterval(this.timer)},e.prototype.extractItems=function(e){var t=this;document.querySelectorAll("["+e+"]").forEach((function(n){var r=n.getAttribute(e);Number.isNaN(Number(r))||(r=1e3*parseInt(r,10));var o=new Date(r);o.getTime()>0&&t.items.push(new i.default(n,n.innerHTML,o)),n.removeAttribute(e),n.hasAttribute("title")||n.setAttribute("title",n.textContent)}))},e.prototype.analyse=function(){var e=this,t=new Date;this.items.filter((function(e){return void 0===e.nextUpdate||null!==e.nextUpdate&&e.nextUpdate<t})).forEach((function(t){return e.manageItem(t)}))},e.prototype.manageItem=function(e){var t=a.default.getDateInterval(e.date),n=l.default.render(this.rules,t,this.locale),r=function(t){e.reference.innerHTML!==t&&(e.reference.innerHTML=t)};n instanceof f.default?(null===n.nextUpdate&&this.removeItem(e),e.nextUpdate=n.nextUpdate,r(n.render)):r(e.initialContent)},e.prototype.startTimer=function(e,t){return window.setInterval((function(){t()}),1e3*e)},e.prototype.removeItem=function(e){var t=this.items.findIndex((function(t){return t===e}));t>=0&&this.items.splice(t,1)},e.EVENT_REFRESH="clever-date.update",e}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){this.refresh=5,this.selector="data-clever-date",this.rules=[]};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n){this.reference=e,this.initialContent=t,this.date=n};t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(6)),u=function(){function e(){}return e.getDateInterval=function(t){var n=(Date.now()-t.getTime())/1e3,r=Math.trunc(n/e.SECONDS_IN_DAY);n-=e.SECONDS_IN_DAY*r;var u=Math.trunc(n/e.SECONDS_IN_HOUR);n-=e.SECONDS_IN_HOUR*u;var i=Math.trunc(n/e.SECONDS_IN_MINUTE);n-=e.SECONDS_IN_MINUTE*i;var a=Math.trunc(n);return new o.default(t,r,u,i,a)},e.SECONDS_IN_DAY=86400,e.SECONDS_IN_HOUR=3600,e.SECONDS_IN_MINUTE=60,e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t,n,r,o){this.date=e,this.day=t,this.hour=n,this.minute=r,this.second=o};t.default=r},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=r(n(8)),u=r(n(0)),i=function(){function e(){}return e.prototype.render=function(e,t,n){var r=e.find((function(e){return e.condition(t)&&n in e.text}));return r?new u.default(this.parseRule(r.text[n],t,n),this.calculateNextUpdate(r)):null},e.prototype.parseRule=function(e,t,n){var r=this.parseConditions(e,e,t,n);return(r=this.parseValues(e,r,t,n)).replace("\\","")},e.prototype.parseConditions=function(e,t,n,r){for(var o,u=/{%([a-z]+)\|([^|\[\]]*)\|([^|\[\]]*)}/gi;null!==(o=u.exec(e));){var i=this.getValueFromSymbol(o[1],n,r);null!==i&&(t=t.replace(o[0],parseInt(i,10)<=1?o[2]:o[3]))}return t},e.prototype.parseValues=function(e,t,n,r){for(var o,u=/%([a-z]+)/gi;null!==(o=u.exec(e));){var i=this.getValueFromSymbol(o[1],n,r);null!==i&&(t=t.replace(o[0],i))}return t},e.prototype.calculateNextUpdate=function(e){if(null===e.refresh)return null;if(void 0!==e.refresh){var t=new Date;return new Date(t.setTime(t.getTime()+1e3*e.refresh))}},e.prototype.getValueFromSymbol=function(e,t,n){switch(e){case"dd":return t.day.toString();case"dh":return t.hour.toString();case"dm":return t.minute.toString();case"ds":return t.second.toString();default:return o.default.getValueFromSymbol(e,t.date,n)}},e}();t.default=new i},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};t.__esModule=!0;var o=new(r(n(1)).default),u={format:o.format.bind(o),setLocale:o.setLocale.bind(o),getValueFromSymbol:o.getValueFromSymbol.bind(o)};e.exports=u,t.default=u},function(e,t,n){"use strict";t.__esModule=!0;var r=function(){function e(){this.locale=navigator.language}return e.prototype.setLocale=function(e){this.locale=e},e.prototype.format=function(e,t,n){for(var r,o=e,u=/%([a-z]+)/gi;null!==(r=u.exec(e));){var i=this.getValueFromSymbol(r[1],t,null!=n?n:this.locale);null!==i&&(o=o.replace(r[0],i))}return o.replace("\\","")},e.prototype.getValueFromSymbol=function(e,t,n){switch(e){case"Y":return t.getFullYear().toString();case"y":return(""+t.getFullYear()).slice(-2);case"j":return t.getDate().toString();case"d":return("0"+t.getDate()).slice(-2);case"l":return new Intl.DateTimeFormat(n,{weekday:"long"}).format(t);case"D":return new Intl.DateTimeFormat(n,{weekday:"short"}).format(t);case"F":return new Intl.DateTimeFormat(n,{month:"long"}).format(t);case"M":return new Intl.DateTimeFormat(n,{month:"short"}).format(t);case"m":return("0"+(t.getMonth()+1)).slice(-2);case"n":return(t.getMonth()+1).toString();case"G":return t.getHours().toString();case"H":return("0"+t.getHours()).slice(-2);case"i":return("0"+t.getMinutes()).slice(-2);case"s":return("0"+t.getSeconds()).slice(-2);default:return null}},e}();t.default=r}])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=[{condition:function(e){return 0===e.day&&0===e.hour&&0===e.minute&&e.second>=0&&e.second<30},text:{fr:"à l'instant",en:"just now"}},{condition:function(e){return 0===e.day&&0===e.hour&&0===e.minute&&e.second>=0&&e.second<60},text:{en:"%ds second{%ds||s} ago",fr:"il y a %ds seconde{%ds||s}"}},{condition:function(e){return 0===e.day&&0===e.hour&&e.minute>=0&&e.minute<60},text:{en:"%dm minute{%dm||s} ago",fr:"il y a %dm minute{%dm||s}"}},{condition:function(e){return 0===e.day&&e.hour>0&&e.hour>=0&&e.hour<12},refresh:300,text:{en:"%dh hour{%dh||s} ago",fr:"il y a %dh heure{%dh||s}"}},{condition:function(e){return(new Date).toDateString()===e.date.toDateString()},refresh:60,text:{en:"today at %H:%i",fr:"aujourd'hui à %H\\h%i"}},{condition:function(e){var t=new Date,n=t.setDate(t.getDate()-1);return new Date(n).toDateString()===e.date.toDateString()},refresh:60,text:{en:"yesterday at %H:%i",fr:"hier à %H\\h%i"}},{condition:function(e){return e.day>0&&e.day<7},refresh:3600,text:{en:"%l at %H:%i",fr:"%l à %H\\h%i"}},{condition:function(e){return e.date.getFullYear()===(new Date).getFullYear()},refresh:null,text:{en:"%F %d",fr:"le %d{%d|er|} %F"}},{condition:function(){return!0},refresh:null,text:{en:"%F %d, %Y",fr:"le %j{%d|er|} %F %Y"}}]},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.validate=function(e){if("number"!=typeof e.refresh)return new Error("Refresh value must be a number.");for(var t=0,n=e.rules;t<n.length;t++){var o=n[t];if(!o.condition||!o.text||"object"!==r(o.text))return new Error("A rule must be composed of a condition and a corresponding text keys.")}return null},e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.getLocaleName=function(){return navigator.language.split("-")[0]},e}();t.default=r}])}));